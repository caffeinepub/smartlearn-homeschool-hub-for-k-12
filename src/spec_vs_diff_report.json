{
  "kind": "spec_vs_diff_report",
  "version": "1.0",
  "generatedAt": "2026-02-12T01:31:12.018Z",
  "summary": "Diff implements a new frontend authorization error classifier and applies it at least to publish/unpublish mutations, plus various frontend UX/refactors (role prop rename to isEducatorParent, loading guards in App, and claimed stricter role-gating in LessonPlans/Assignments). Backend authorization trap text was changed for publish/unpublish but still uses “Admin role required” and does not demonstrate the requested Educators/Parents-aligned, consistent authorization phrasing across all admin-only endpoints.",
  "missing_requirements": [
    {
      "id": "REQ-30",
      "requirement": "Fine-tune backend authorization trap messages for access-controlled endpoints so they are consistent, role-accurate (Educators/Parents for admin-only actions), and easy for the frontend to classify as authorization failures.",
      "reason": "The shown backend traps use the phrase \"Unauthorized: Admin role required\" rather than explicitly referencing the intended allowed role label (Educators/Parents). Also, the diff excerpt only shows publish/unpublish; it does not provide evidence that all other access-controlled endpoints were updated to the same consistent phrasing.",
      "evidence": [
        "backend/main.mo"
      ]
    }
  ],
  "hallucinated_features": [
    {
      "description": "Global UI/typography styling overhaul (OKLCH color system, base font size changes, scrolling utilities).",
      "reason": "Not requested by REQ-28/29/30, which focus on RBAC UX and authorization messaging.",
      "evidence": [
        "frontend-file-summaries.txt (frontend/src/index.css)"
      ]
    },
    {
      "description": "Onboarding guide content/UX refinements beyond role-wording constraints (multi-step onboarding dialog changes, spacing/responsive design).",
      "reason": "REQ-28 only calls out avoiding “teacher” wording when the intended role is Educator/Parent; broader onboarding UX revisions are not requested.",
      "evidence": [
        "frontend/src/components/OnboardingGuide.tsx",
        "frontend-file-summaries.txt (frontend/src/components/OnboardingGuide.tsx)"
      ]
    },
    {
      "description": "Progress tab layout/visual hierarchy adjustments.",
      "reason": "Not requested by REQ-28/29/30.",
      "evidence": [
        "frontend/src/components/ProgressTab.tsx",
        "frontend-file-summaries.txt (frontend/src/components/ProgressTab.tsx)"
      ]
    }
  ],
  "confidence": 0.62,
  "changed_files": [
    "backend/main.mo",
    "frontend-file-summaries.txt",
    "frontend/src/App.tsx",
    "frontend/src/components/AssignmentsTab.tsx",
    "frontend/src/components/LessonPlansTab.tsx",
    "frontend/src/components/OnboardingGuide.tsx",
    "frontend/src/components/ProgressTab.tsx",
    "frontend/src/components/ReportCardsTab.tsx",
    "frontend/src/hooks/useQueries.ts",
    "frontend/src/pages/Dashboard.tsx",
    "frontend/src/utils/authorizationErrors.ts",
    "project_state.json"
  ]
}